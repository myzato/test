<html><head><meta charset="utf-8">
<style>
.item1 {
  border: 1px solid #000;
  width: 470px;
  height: 470px;
  margin: 10px;
  float: left;
}
.item2 {
  border: 1px solid #000;
  width: 220px;
  height: 300px;
  margin: 10px;
  float: left;
}
.item3 {
  border: 1px solid #000;
  width: 220px;
  height: 170px;
  margin: 10px;
  float: left;
}
</style>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
<script src="jquery.masonry.min.js"></script>

</head>
<body><div id="container" class="masonry" style="position: relative; height: 492px; width: 1000px;">
	<div class="item1 masonry-brick" style="position: absolute; top: 0px; left: 0px;">aaa</div>
	<div class="item2 masonry-brick" style="position: absolute; top: 0px; left: 500px;">bbb</div>
	<div class="item3 masonry-brick" style="position: absolute; top: 0px; left: 750px;">ccc</div>
	<div class="item1 masonry-brick">aaa</div>	
	<div class="item1 masonry-brick">aaa</div>
	<div class="item1 masonry-brick">aaa</div>
	<div class="item2 masonry-brick">aaa</div>
	<div class="item3 masonry-brick">aaa</div>
	<div class="item3 masonry-brick">aaa</div>
	<div class="item3 masonry-brick">aaa</div>
	<div class="item3 masonry-brick">aaa</div>

</div>

<script>
/*$('#container').masonry({
    columnWidth: 10,
    isFitWidth: true,
    isAnimated: true,
    animationOptions: {
        duration: 400
    }
});*/

var flag;
var min_width = 540;

function check() {
	if ( $('html').width() < min_width ) {
		if ( flag ) {
			$('#container').masonry('destroy');
			flag = 0;
		}
		} else {
		$('#container').masonry({
			itemSelector: '.masonry-brick',
			columnWidth: 10,
			isAnimated: true,
			isFitWidth: true
		});
		flag = 1;
	}
}

$(function(){
	check();
});

$(window).resize(function () {
	check();
});

</script>
</body></html>
